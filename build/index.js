module.exports=function(e){var n={};function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(r,i,function(n){return e[n]}.bind(null,i));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(e,n,t){"use strict";function r(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}t.r(n);var i=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.events={}}var n,t,i;return n=e,(t=[{key:"_getEventListByName",value:function(e){return void 0===this.events[e]&&(this.events[e]=new Set),this.events[e]}},{key:"on",value:function(e,n){this._getEventListByName(e).add(n)}},{key:"once",value:function(e,n){var t=this;this.on(e,function r(){t.removeListener(e,r);for(var i=arguments.length,o=new Array(i),u=0;u<i;u++)o[u]=arguments[u];n.apply(t,o)})}},{key:"emit",value:function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];this._getEventListByName(e).forEach(function(e){e.apply(this,t)}.bind(this))}},{key:"removeListener",value:function(e,n){this._getEventListByName(e).delete(n)}}])&&r(n.prototype,t),i&&r(n,i),e}();function o(e,n,t,r,i,o,u){try{var a=e[o](u),s=a.value}catch(e){return void t(e)}a.done?n(s):Promise.resolve(s).then(r,i)}function u(e){return function(){var n=this,t=arguments;return new Promise(function(r,i){var u=e.apply(n,t);function a(e){o(u,r,i,a,s,"next",e)}function s(e){o(u,r,i,a,s,"throw",e)}a(void 0)})}}function a(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}t.d(n,"default",function(){return f});var f=function(){function e(n){var t=this,r=n.isTokenValid,o=n.getAccessToken,a=n.onRefreshToken;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,"event",new i),s(this,"isRefreshing",!1),s(this,"refreshTimeout",3e3);var f=new i;f.on("refresh",function(){u(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o();case 3:n=e.sent,r(n)?f.emit("refreshDone",n):f.emit("refreshing"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}))()}),f.on("refreshing",function(){if(!t.isRefreshing){t.isRefreshing=!0;a(function(e){t.event.emit("refreshDone",e),t.isRefreshing=!1}),t.refreshTimeout&&setTimeout(function(){t.event.emit("refreshDone",null),t.isRefreshing=!1},t.refreshTimeout)}}),this.event=f}var n,t,r;return n=e,(t=[{key:"getToken",value:function(){var e=this;return new Promise(function(n,t){var r=!1;e.event.once("refreshDone",function(e){n(e),r=!0}),r||e.event.emit("refresh")})}},{key:"inject",value:function(e){var n=this;return u(regeneratorRuntime.mark(function t(){var r,i,o,u,a,s=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.getToken();case 2:for(r=t.sent,i=s.length,o=new Array(i),u=0;u<i;u++)o[u]=s[u];return t.next=6,e.apply(void 0,[r].concat(o));case 6:return a=t.sent,t.abrupt("return",a);case 8:case"end":return t.stop()}},t)}))}}])&&a(n.prototype,t),r&&a(n,r),e}()}]);